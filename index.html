<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>One Stop Contact</title>
  </head>
  <body>
	<h1>One Stop Contact</h1>
	<p>Enter your details, generate a QR code and share it anywhere.</p>
	<p>P.S. You can leave a input box blank and that detail will not be included in QR code</p>
	<hr>

	<span>Whatsapp Number</span>
	<input type="text" id="whatsapp" placeholder="+919999999999"/>
	<br>

	<span>Instagram</span>
	<input type="text" id="instagram" placeholder="example_123"/>
	<br>

	<span>twitter</span>
	<input type="text"id="twitter" placeholder="example_123"/>
	<br>

	<span>Email</span>
	<input type="text" id="email" placeholder="example@gmail.com"/>
	<br>
	<div>
		<button id="generateQr">generate QR</button>
		<button id="download" onclick="downloadQR()" style="visibility:hidden">Download Qr</button>
	</div>
	<canvas id="qrcode"></canvas>

	 <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
	<script>
function makeQR(your_data){
      let qrcodeContainer = document.getElementById("qrcode");
        qrcodeContainer.innerHTML = "";
        new QRious({
          element: qrcodeContainer,
          value: your_data,
          size: 600,
          padding:50,
        }); // generate QR code in canvas
        //downloadQR();
	document.getElementById("download").style="block";
    }

function downloadQR() {
        var link = document.createElement('a');
        link.download = 'filename.png';
        link.href = document.getElementById('qrcode').toDataURL()
        link.click();
    } 
		document.getElementById("generateQr").addEventListener("click",()=>{
			var output = `https://shabbirjodhpur.github.io/one-stop-contact/contact?
				whatsapp=${document.getElementById("whatsapp").value}
				&instagram=${document.getElementById("instagram").value}
				&twitter=${document.getElementById("twitter").value}
				&email=${document.getElementById("email").value}`;

			makeQR(output);
			console.log(output)
		})
	</script>
  </body>
</html>
