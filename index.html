<!DOCTYPE html>
<html lang="en">
        <head>
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-TYV6JF09YP"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'G-TYV6JF09YP');
		</script>

                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <meta http-equiv="X-UA-Compatible" content="ie=edge">
                <title>One Stop Contact</title>
                <style>
@import url('https://fonts.googleapis.com/css2?family=Modern+Antiqua&display=swap');
                        #input-wrapper>div {
                                display: flex;
                                flex-dirctin: column;
                                align-items: center;
                        }
			#icard-wrapper{
				display:flex;
				flex-direction:column;
				background-color:whitesmoke;
				border-radius:16px;
				padding:0px;
				max-width:450px;
				border: 1px solid black;
				box-shadow: 8px 8px 13px black;
			}
			#profile-image{
				width:20vw;
				height:20vw;
				max-width:100px;
				max-height:100px;
				border-radius:50%;
				margin:16px;
			}
			#qrcode{
				padding: 16px 45px;
			}
			#card-name{
				font-size:24px;
				margin:0px;
			}
			#virtual-contact-card{
				text-align:center;
				background-color:lightgreen;
				padding:16px;
				margin:0px;
				border-top-left-radius:16px;
				border-top-right-radius:16px;
				font-size:32px;
				color:white;
			}
                </style>
        </head>
        <body>
                <div style="display:flex;flex-dirctin:column;align-items:center;">
                        <h1>One Stop Contact</h1>
                        <img src="https://img.icons8.com/quill/50/null/experimental-contact-card-quill.png" />
                </div>
                <p>Fill the input boxes, and convert your details into a QR code ,and share it anywhere!</p>
                <p>P.S. You can leave a input box blank and that detail will not be included in QR code</p>
                <hr>
                <div id="input-wrapper">
                        <div>
                                <img src="https://img.icons8.com/color/48/null/business-contact.png" />
                                <input type="text" id="name" placeholder="name" />
                        </div>
                        <div>
                                <img src="https://img.icons8.com/doodle/48/null/picture.png"/>
                                <input id="upload-image" type="file" accept="image" onchange="readURL(this);" style="width: 182px;" />
				<span>(optional)</span>
                        </div>
                        <div>
                                <img src="https://img.icons8.com/color/48/null/whatsapp--v1.png" />
                                <input type="text" id="whatsapp" placeholder="+919999999999" />
                                <span>(optional)</span>
                        </div>
                        <div>
                                <img src="https://img.icons8.com/fluency/48/null/instagram-new.png" />
                                <input type="text" id="instagram" placeholder="example_123" />
                                <span>(optional)</span>
                        </div>
                        <div>
                                <img src="https://img.icons8.com/color/48/null/twitter--v1.png" />
                                <input type="text" id="twitter" placeholder="example_123" />
                                <span>(optional)</span>
                        </div>
                        <div>
                                <img src="https://img.icons8.com/color/48/null/linkedin-circled--v1.png" />
                                <input type="text" id="linkedin" placeholder="example_example" />
                                <span>(optional)</span>
                        </div>
                        <div>
                                <img src="https://img.icons8.com/color/48/null/circled-envelope.png" />
                                <input type="text" id="email" placeholder="example@gmail.com" />
                                <span>(optional)</span>
                        </div>
                        <div>
                                <img src="https://img.icons8.com/fluency/48/null/internet.png" />
                                <input type="text" id="website" placeholder="example.com" />
                                <span>(optional)</span>
                        </div>
                </div>
                <div>
                        <button style="padding:16px;background-color:blue;color:white;border-radius:16px;" id="generateQr">generate QR</button>
                        <button style="padding:16px;background-color:blue;color:white;border-radius:16px;display:none;" id="download" onclick="downloadQR()">Download Qr</button>
                </div>

		<div id="icard-wrapper">
			<p id="virtual-contact-card">Virtual Contact Card</p>
			<div style="display:flex;flex-direction:column;align-items:center;">
				<img id="profile-image" src="https://img.icons8.com/ios-glyphs/240/null/user-male--v1.png">
				<p id="card-name"></p>
			</div>
			<canvas id="qrcode"></canvas>
			<p style="text-align:center;font-family: 'Modern Antiqua', cursive;">One Stop Contact</p>
		</div>

                <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
                <script>
			function readURL(input) {
				if (input.files && input.files[0]) {
					var reader = new FileReader();

					reader.onload = function (e) {
						document.getElementById('profile-image').src = e.target.result;
					};
	
					reader.readAsDataURL(input.files[0]);
				}
			}

			
                        function makeQR(your_data) {
				document.getElementById("card-name").innerHTML = document.getElementById("name").value
                                let qrcodeContainer = document.getElementById("qrcode");
                                qrcodeContainer.innerHTML = "";
                                new QRious({
                                        element: qrcodeContainer,
                                        value: your_data,
                                        size: 600,
                                        padding: 50,
                                }); // generate QR code in canvas
                                //downloadQR();
                                document.getElementById("download").style = "padding:16px;background-color:blue;color:white;border-radius:16px;display:block;";
                        }

                        function downloadQR() {

                                //var link = document.createElement('a');
                                //link.download = 'filename.png';
                                //link.href = document.getElementById('qrcode').toDataURL()
                                //link.click();

				var node = document.getElementById('icard-wrapper');

				domtoimage.toPng(node).then(function(dataUrl) {
					var link = document.createElement('a');
					link.download = 'Info.png';
					link.href = dataUrl;
					link.click();
				}).catch(function(error) {
					console.error('oops, something went wrong!', error);
				});
                        }
                        document.getElementById("generateQr").addEventListener("click", () => {
                                var output = `https://shabbirjodhpur.github.io/one-stop-contact/contact?
name=${encodeURIComponent(document.getElementById("name").value)}
&whatsapp=${encodeURIComponent(document.getElementById("whatsapp").value)}
&instagram=${encodeURIComponent(document.getElementById("instagram").value)}
&twitter=${encodeURIComponent(document.getElementById("twitter").value)}
&linkedin=${encodeURIComponent(document.getElementById("linkedin").value)}
&email=${encodeURIComponent(document.getElementById("email").value)}
&website=${encodeURIComponent(document.getElementById("website").value)}`;
                                makeQR(output);
                                console.log(output)
                        })
                </script>
        </body>
</html>
